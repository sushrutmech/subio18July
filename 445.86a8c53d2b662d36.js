"use strict";(self.webpackChunksubioRevamp=self.webpackChunksubioRevamp||[]).push([[445],{1445:(Z,m,s)=>{s.r(m),s.d(m,{ProfileModule:()=>N});var u=s(9808),d=s(1083),o=s(3075),e=s(5e3),b=s(9467),f=s(72),c=s(9224);function h(r,a){if(1&r){const i=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(i),e.oxw().onCancelClick()}),e._UZ(1,"i",37),e._uU(2," Cancel "),e.qZA()}}const g=[{path:"",component:(()=>{class r{constructor(i,t,l){this.authService=i,this.formBuilder=t,this.spinner=l,this.is_edit=!1,this.userForm=new o.cw({}),this.submitted=!1,console.log("profile calling"),this.userDetail=this.authService.userSession.user}ngOnInit(){this.initializeForm()}initializeForm(){this.userForm=this.formBuilder.group({firstName:[this.userDetail.firstName,o.kI.required],lastName:[this.userDetail.lastName,o.kI.required],preferredName:[this.userDetail.preferredName,o.kI.required],jobTitle:[this.userDetail.jobTitle],contactNumber:[this.userDetail.contactNumber],emailAddress:[this.userDetail.emailAddress]}),this.defaultImage=this.userDetail.profilePic}get formControls(){return this.userForm.controls}onFormSubmit(){this.submitted=!0,this.userForm.valid&&(this.spinner.show(),this.userDetail.firstName=this.userForm.value.firstName,this.userDetail.lastName=this.userForm.value.lastName,this.userDetail.preferredName=this.userForm.value.preferredName,this.userDetail.jobTitle=this.userForm.value.jobTitle||"",this.userDetail.contactNumber=this.userForm.value.contactNumber||"",this.userDetail.emailAddress=this.userForm.value.emailAddress,this.userDetail.profilePic=this.defaultImage,this.authService.updateProfile(this.userDetail).subscribe(i=>{this.submitted=!1,this.spinner.hide()}))}onCancelClick(){this.userForm.reset({firstName:this.userDetail.firstName,lastName:this.userDetail.lastName,preferredName:this.userDetail.preferredName,jobTitle:this.userDetail.jobTitle,contactNumber:this.userDetail.contactNumber,emailAddress:this.userDetail.emailAddress}),this.defaultImage=this.userDetail.profilePic,this.submitted=!1}processFile(i){if(i.target.files&&i.target.files[0]){var t=new FileReader;t.readAsDataURL(i.target.files[0]),t.onload=l=>{let n=l.target.result.toString();n=n.replace(/data:image\/[a-z]*;base64,/g,""),this.defaultImage=n}}}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(b.e),e.Y36(o.qu),e.Y36(f.t2))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile"]],decls:58,vars:15,consts:[[1,"conatiner"],[1,"animated","fadeIn","py-3"],[1,"row",2,"align-items","center","justify-content","center","margin","0px"],[1,"col-md-4"],[1,"mt-1"],[1,"card","border-0"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"d-flex","align-items-center","justify-content-center","align-items-md-start","flex-column-reverse","flex-md-row","mb-3"],["type","file","accept","image/*",1,"d-none",3,"change"],["imageInput",""],[1,"text-center"],["alt","...",1,"rounded","profile-image",3,"src"],[1,"mt-2"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-camera"],[1,"col-md-12","mb-3"],["for","firstName",1,"form-label"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],[1,"invalid-feedback"],["for","lastName",1,"form-label"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","preferredName",1,"form-label"],["type","text","id","preferredName","formControlName","preferredName",1,"form-control"],["for","jobTitle",1,"form-label"],["type","text","id","jobTitle","formControlName","jobTitle",1,"form-control"],["for","contactNumber",1,"form-label"],["type","number","id","contactNumber","formControlName","contactNumber",1,"form-control"],["for","emailAddress",1,"form-label"],["type","text","id","emailAddress","formControlName","emailAddress",1,"form-control",3,"disabled"],[1,"col-md-12","d-flex","justify-content-end"],["type","button","class","btn btn-secondary ml-3",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled"],[1,"fa","fa-floppy-o","mr-1"],["type","button",1,"btn","btn-secondary","ml-3",3,"click"],[1,"fa","fa-ban","mr-1"]],template:function(i,t){if(1&i){const l=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"div",5)(6,"div",6)(7,"form",7),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"input",11,12),e.NdJ("change",function(p){return t.processFile(p)}),e.qZA(),e.TgZ(13,"div",13),e._UZ(14,"img",14),e.TgZ(15,"div",15)(16,"button",16),e.NdJ("click",function(){return e.CHM(l),e.MAs(12).click()}),e._UZ(17,"i",17),e._uU(18," Change Your Profile Picture "),e.qZA()()()()(),e.TgZ(19,"div",18)(20,"label",19),e._uU(21,"First name"),e.qZA(),e._UZ(22,"input",20),e.TgZ(23,"div",21),e._uU(24," Please enter your First name "),e.qZA()(),e.TgZ(25,"div",18)(26,"label",22),e._uU(27,"Last name"),e.qZA(),e._UZ(28,"input",23),e.TgZ(29,"div",21),e._uU(30," Please enter your Last name "),e.qZA()(),e.TgZ(31,"div",18)(32,"label",24),e._uU(33,"Preferred name"),e.qZA(),e._UZ(34,"input",25),e.TgZ(35,"div",21),e._uU(36," Please enter your preferred name "),e.qZA()(),e.TgZ(37,"div",18)(38,"label",26),e._uU(39,"Job title"),e.qZA(),e._UZ(40,"input",27),e.TgZ(41,"div",21),e._uU(42," Please enter your Job title "),e.qZA()(),e.TgZ(43,"div",18)(44,"label",28),e._uU(45,"Contact number"),e.qZA(),e._UZ(46,"input",29),e.TgZ(47,"div",21),e._uU(48," Please enter your Contact number "),e.qZA()(),e.TgZ(49,"div",18)(50,"label",30),e._uU(51,"Email address"),e.qZA(),e._UZ(52,"input",31),e.qZA(),e.TgZ(53,"div",32),e.YNc(54,h,3,0,"button",33),e.TgZ(55,"button",34),e._UZ(56,"i",35),e._uU(57," Save My Profile "),e.qZA()()()()()()()()()()()}2&i&&(e.xp6(7),e.Q6J("formGroup",t.userForm),e.xp6(7),e.Q6J("src",t.defaultImage?"data:image/png;base64,"+t.defaultImage:"./assets/img/dummy-profile.png",e.LSH),e.xp6(8),e.ekj("is-invalid",t.submitted&&t.formControls.firstName.errors),e.xp6(6),e.ekj("is-invalid",t.submitted&&t.formControls.lastName.errors),e.xp6(6),e.ekj("is-invalid",t.submitted&&t.formControls.preferredName.errors),e.xp6(6),e.ekj("is-invalid",t.submitted&&t.formControls.jobTitle.errors),e.xp6(6),e.ekj("is-invalid",t.submitted&&t.formControls.contactNumber.errors),e.xp6(6),e.Q6J("disabled",t.is_edit),e.xp6(2),e.Q6J("ngIf",t.userForm.dirty),e.xp6(1),e.Q6J("disabled",t.submitted&&t.userForm.invalid))},directives:[c.a8,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.wV,u.O5],styles:[".profile-image[_ngcontent-%COMP%]{width:150px}"]}),r})()}];let v=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[d.Bz.forChild(g)],d.Bz]}),r})(),N=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.ez,v,o.u5,o.UX,f.ef,c.QW]]}),r})()}}]);